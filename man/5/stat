.TH STAT 5 
.SH NAME
stat, wstat \- inquire or change file attributes
.SH SYNOPSIS
.ta \w'\fLTwstat 'u
.B
Tstat	
.IR tag [2]
.IR fid [2]
.br
.B
Rstat	
.IR tag [2]
.IR fid [2]
.IR stat [116]
.PP
.B
Twstat	
.IR tag [2]
.IR fid [2]
.IR stat [116]
.br
.B
Rwstat	
.IR tag [2]
.IR fid [2]
.SH DESCRIPTION
The
.B stat
transaction inquires about the file
identified by
.IR fid .
The reply will contain a 116-byte
.RB ( DIRLEN
in
.BR <lib9.h> )
machine-independent
.I
directory entry
laid out as follows:
.TP 17n
.BR name[28]
file name; must be
.B /
if the file is the root directory of the server
.PD 0
.TP
.B uid[28]
owner name
.TP
.B gid[28]
group name
.TP
.B qid.path[4]
the file server's identification for the file
.TP
.B qid.vers[4]
version number for given path
.TP
.B mode[4]
permissions and flags
.TP
.B atime[4]
last access time
.TP
.B mtime[4]
last modification time
.TP
.B length[8]
length of file in bytes
.TP
.B type[2]
for kernel use
.TP
.B dev[2]
for kernel use
.PD
.PP
Integers in this encoding are in little-endian order (least
significant byte first).
The
.B convM2D
and
.B convD2M
routines (see
.IR styx (10.2))
convert between directory entries and C
.BR structs .
.PP
This encoding may be turned into
a machine dependent
.B Dir
structure (see
.BR <lib9.h> )
using routines defined in
.IR styx (10.2).
.PP
The
.I mode
contains permission bits as described in
.IR intro (5)
and
.B 16r80000000
if this file is a directory.
.PP
The two time fields are measured in seconds since the epoch
(Jan 1 00:00 1970 GMT).
The
.I mtime
field reflects the time of the last change of content.
For a plain file,
.I mtime
is the time of the most recent
.BR create ,
.B open
with truncation,
or
.BR write ;
for a directory it is the time of the most recent
.BR remove ,
.BR create ,
or
.B wstat
of a file in the directory.
Similarly, the
.I atime
field records the last
.B read
of the contents;
also it is set whenever
.I mtime
is set.
In addition, for a directory, it is set by
an
.BR attach ,
.BR walk ,
or
.BR create ,
all whether successful or not.
.PP
The
.I length
records the number of bytes in the file.
Directories and most files representing devices have a conventional
length of 0.
.PP
The
.B stat
request requires no special permissions.
.PP
The
.B wstat
request can change some of the file status information.
The
.I name
can be changed by anyone with write permission in the parent directory;
it is an error to change the name to that of an existing file.
The
.I mode
and
.I mtime
can be changed by the owner of the file or the group leader of the file's current
group.
The directory bit cannot be changed by a
.BR wstat ;
the other defined permission and mode bits can.
The
.I gid
can be changed: by the owner if also a member of the new group; or
by the group leader of the file's current group
if also leader of the new group
(see
.IR intro (5)
for more information about permissions).
None of the other data can be altered by a
.BR wstat .
In particular, there is no way to change the owner of a file.
.PP
A
.B read
of a directory yields an integral number of directory entries in
the machine independent encoding given above
(see
.IR read (5)).
.SH ENTRY POINTS
.B Stat
messages are generated by the
.B fstat
and
.B stat
calls (see
.IR sys-stat (2)).
.PP
.B Wstat
messages are generated by the
.B fwstat
and
.B wstat
calls (see
.IR sys-stat (2)).
.SH SEE ALSO
.IR sys-stat (2),
.IR intro (5),
.IR read (5),
.IR intro (10),
.IR styx (10.2)
